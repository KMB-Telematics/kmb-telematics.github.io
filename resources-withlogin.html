<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>KMB Telematics</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="KMB Telematics - Digital Imaging Radar" name="description">
	<meta content="http://kmb.ac" name="author">
	<link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
	<link rel="icon" type="image/png" href="/img/favicon/favicon.ico">
	<link rel="manifest" href="/img/favicon/site.webmanifest">
	<!-- css -->
	<link href="/css/bootstrap.min.css" rel="stylesheet" />
	<link href="/css/fancybox/jquery.fancybox.css" rel="stylesheet">
	<link href="/css/jcarousel.css" rel="stylesheet" />
	<link href="/css/flexslider.css" rel="stylesheet" />
	<link href="/css/style.css" rel="stylesheet" />
	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
</head>

<body>
	<div id="wrapper">
		<!-- header -->
		<common-header thispage="resources"></common-header>
		<!-- end header -->

		<!-- inner header -->
		<inner-header pagename="Resources"></inner-header>
		<!-- end inner header -->

		<!-- content -->
		<section id="content">
			<div class="container">
				<h1>This space is under construction.</h1>

				<form id="subscribe-form" class="subscribe">
					<input type="submit" value="Login" id="login" class="submit btn btn-default">
				</form>

				<div style="min-height: 150px;"></div>

			</div>
		</section>
		<!-- end content -->

		<!-- footer -->
		<common-footer></common-footer>
		<!-- end footer -->
	</div>
	<scroll-up></scroll-up>
	<!-- javascript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="/js/jquery.js"></script>
	<script src="/js/jquery.easing.1.3.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/jquery.fancybox.pack.js"></script>
	<script src="/js/jquery.fancybox-media.js"></script>
	<script src="/js/portfolio/jquery.quicksand.js"></script>
	<script src="/js/portfolio/setting.js"></script>
	<script src="/js/jquery.flexslider.js"></script>
	<script src="/js/animate.js"></script>
	<script src="/js/custom.js"></script>
	<script type=module src="/js/main.js"></script>
	<script type=module src="/js/formhandlers.js"></script>
	<script src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
	<script>
		auth0.createAuth0Client({
		domain: "dev-izf74ye7u1kum7ys.us.auth0.com",
		clientId: "HVz2jWusuxPQFuIJf02OGec5y9mIDPuC",
		authorizationParams: {
			redirect_uri: window.location.origin
		}
		}).then(async (auth0Client) => {
		// Assumes a button with id "login" in the DOM
		const loginButton = document.getElementById("login");

		loginButton.addEventListener("click", (e) => {
			e.preventDefault();
			auth0Client.loginWithRedirect();
		});

		if (location.search.includes("state=") && 
			(location.search.includes("code=") || 
			location.search.includes("error="))) {
			await auth0Client.handleRedirectCallback();
			window.history.replaceState({}, document.title, "/");
		}

		// Assumes a button with id "logout" in the DOM
		const logoutButton = document.getElementById("logout");

		logoutButton.addEventListener("click", (e) => {
			e.preventDefault();
			auth0Client.logout();
		});

		const isAuthenticated = await auth0Client.isAuthenticated();
		const userProfile = await auth0Client.getUser();

		// Assumes an element with id "profile" in the DOM
		const profileElement = document.getElementById("profile");

		if (isAuthenticated) {
			profileElement.style.display = "block";
			profileElement.innerHTML = `
					<p>${userProfile.name}</p>
					<img src="${userProfile.picture}" />
				`;
		} else {
			profileElement.style.display = "none";
		}
		});
	</script>
</body>

</html>